const year=document.getElementById('year');if(year)year.textContent=new Date().getFullYear();const themeToggle=document.getElementById('themeToggle');let dark=true;themeToggle?.addEventListener('click',()=>{document.documentElement.classList.toggle('light');dark=!dark;});for(const el of document.querySelectorAll('.metric-number')){const from=Number(el.dataset.from||0);const to=Number(el.dataset.to||0);const duration=1200+Math.random()*800;let start;const step=t=>{if(!start)start=t;const p=Math.min(1,(t-start)/duration);el.textContent=Math.round(from+(to-from)*p);if(p<1)requestAnimationFrame(step);};const io=new IntersectionObserver(entries=>{if(entries[0].isIntersecting){requestAnimationFrame(step);io.disconnect();}},{threshold:.6});io.observe(el);}const filterBtns=document.querySelectorAll('[data-filter]');const grid=document.getElementById('projectGrid');filterBtns.forEach(btn=>btn.addEventListener('click',e=>{filterBtns.forEach(b=>b.classList.remove('active'));btn.classList.add('active');const tag=btn.dataset.filter;grid.querySelectorAll('article').forEach(card=>{if(tag==='all'||card.dataset.tags.includes(tag)){card.style.display='block';card.classList.add('rise');}else{card.style.display='none';}});}));const certs={"AZ-900":{title:"AZ-900 — Microsoft Azure Fundamentals",url:"https://learn.microsoft.com/certifications/azure-fundamentals/"},"AS-1":{title:"Tosca — AS-1",url:"https://university.tricentis.com/"},"AS-2":{title:"Tosca — AS-2",url:"https://university.tricentis.com/"},"TDS-1":{title:"Tosca — TDS-1",url:"https://university.tricentis.com/"},"TDS-2":{title:"Tosca — TDS-2",url:"https://university.tricentis.com/"},"AU-1":{title:"Tosca — AU-1",url:"https://university.tricentis.com/"},"AU-2":{title:"Tosca — AU-2",url:"https://university.tricentis.com/"}};const modal=document.getElementById('certModal');const title=document.getElementById('certTitle');const body=document.getElementById('certBody');const link=document.getElementById('certLink');document.querySelectorAll('.cert').forEach(btn=>{btn.addEventListener('click',()=>{const key=btn.dataset.cert;const c=certs[key];if(!c)return;title.textContent=c.title;body.innerHTML=`<p>Open the external verification page to view details for <strong>${c.title}</strong>.</p>`;link.href=c.url;modal.showModal();});});document.getElementById('closeCert')?.addEventListener('click',()=>modal.close());const canvas=document.getElementById('bg');const ctx=canvas.getContext('2d');let w,h,points=[];function resize(){w=canvas.width=innerWidth;h=canvas.height=innerHeight;points=Array.from({length:Math.min(120,Math.floor(w*h/18000))},()=>({x:Math.random()*w,y:Math.random()*h,vx:(Math.random()-.5)*0.6,vy:(Math.random()-.5)*0.6}));}addEventListener('resize',resize);resize();function tick(){ctx.clearRect(0,0,w,h);const g=ctx.createLinearGradient(0,0,w,h);g.addColorStop(0,'#0b1220');g.addColorStop(1,'#0e1528');ctx.fillStyle=g;ctx.fillRect(0,0,w,h);for(const p of points){p.x+=p.vx;p.y+=p.vy;if(p.x<0||p.x>w)p.vx*=-1;if(p.y<0||p.y>h)p.vy*=-1;}for(let i=0;i<points.length;i++){for(let j=i+1;j<points.length;j++){const a=points[i],b=points[j];const dx=a.x-b.x,dy=a.y-b.y,d=Math.hypot(dx,dy);if(d<120){ctx.strokeStyle='rgba(125,211,252,'+(0.25-d/480)+')';ctx.beginPath();ctx.moveTo(a.x,a.y);ctx.lineTo(b.x,b.y);ctx.stroke();}}}for(const p of points){ctx.fillStyle='rgba(167,139,250,.7)';ctx.beginPath();ctx.arc(p.x,p.y,1.4,0,Math.PI*2);ctx.fill();}requestAnimationFrame(tick);}requestAnimationFrame(tick);document.querySelectorAll('header nav a').forEach(a=>{a.addEventListener('click',e=>{const id=a.getAttribute('href');if(id?.startsWith('#')){e.preventDefault();document.querySelector(id)?.scrollIntoView({behavior:'smooth'});}})});